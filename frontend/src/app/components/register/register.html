<div class="form_wrapper">
    <form class="register_form" [formGroup]="form" (ngSubmit)="onSubmit()">
        <h1 class="form_title">Register</h1>

        <div class="form_group">
            <label>Email</label>
            <input
                type="email"
                formControlName="email"
                [class.invalid]="f['email'].touched && f['email'].invalid"
            />

            @if (f['email'].touched && f['email'].invalid) {
                <div class="error">
                    @if (f['email'].errors?.['required']) {
                        <small>Email is required</small>
                    }
                    @if (f['email'].errors?.['invalidEmail']) {
                        <small>Please enter a valid email</small>
                    }
                </div>
            }
        </div>

        <div class="form_group">
            <label>First Name</label>
            <input
                type="text"
                formControlName="firstName"
                [class.invalid]="f['firstName'].touched && f['firstName'].invalid"
            />

            @if (f['firstName'].touched && f['firstName'].invalid) {
                <div class="error">
                    @if (f['firstName'].errors?.['required']) {
                        <small>First Name is required</small>
                    }
                </div>
            }
        </div>

        <div class="form_group">
            <label>Last Name</label>
            <input
                type="text"
                formControlName="lastName"
                [class.invalid]="f['lastName'].touched && f['lastName'].invalid"
            />

            @if (f['lastName'].touched && f['lastName'].invalid) {
                <div class="error">
                    @if (f['lastName'].errors?.['required']) {
                        <small>Last Name is required</small>
                    }
                </div>
            }
        </div>

        <div class="form_group">
            <label>Password</label>
            <input
                type="password"
                formControlName="password"
                [class.invalid]="f['password'].touched && f['password'].invalid"
            />

            @if (f['password'].touched && f['password'].errors) {
                <div class="error">
                    @if (f['password'].errors?.['required']) {
                        <small>Password is required</small>
                    }
                    @if (f['password'].errors?.['passwordStrength']) {
                        @for (msg of f['password'].errors['passwordStrength']; track $index) {
                            <small>{{ msg }}</small>
                        }
                    }
                </div>
            }
        </div>

        <div class="form_group">
            <label>Confirm Password</label>
            <input
                type="password"
                formControlName="confirmPassword"
                [class.invalid]="f['confirmPassword'].touched && f['confirmPassword'].invalid || form.errors?.['passwordMismatch']"
            />

            @if (f['confirmPassword'].touched && f['confirmPassword'].invalid) {
                <div class="error">
                    @if (f['confirmPassword'].errors?.['required']) {
                        <small>Confirm Password is required</small>
                    }
                </div>
            }

            @if (form.errors?.['passwordMismatch'] && f['confirmPassword'].touched) {
                <div class="error">
                    <small>Passwords do not match</small>
                </div>
            }
        </div>
        <button
            class="submit_btn"
            type="submit"
            [disabled]="form.invalid"
        >
            Register
        </button>
    </form>
</div>
